<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>

<body>
  <script>
    async function getTopics() {
      try {
        const topics = await document.browsingTopics();
        const topicIds = topics.map(topic => topic.topic).join(',');

        console.log('[Debug] topicIds --', topicIds);
        
        // Target origin is unknown so '*' is used for any origin
        window.top.postMessage({ topicIds }, '*');
      } catch(error) {
        console.error('An error occurred with the Topics API:', error);
      } 
    }
    getTopics();
  </script>
</body>
</html>